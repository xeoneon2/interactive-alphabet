<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="manifest.json" />
  <title>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ê–∑–±—É–∫–∞</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: hsl(0, 0%, 100%);
      font-family: sans-serif;
      touch-action: manipulation;
    }
    body::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      border: 10px solid red;
      pointer-events: none;
      animation: borderHue 10s linear infinite;
      box-sizing: border-box;
    }
    @keyframes borderHue {
      0%   { border-color: red; }
      14%  { border-color: orange; }
      28%  { border-color: yellow; }
      42%  { border-color: green; }
      57%  { border-color: blue; }
      71%  { border-color: indigo; }
      85%  { border-color: violet; }
      100% { border-color: red; }
    }
    @keyframes bgPulse {
      0%, 100% { background-color: hsl(0, 0%, 100%); }
      50%      { background-color: hsl(0, 0%, 92%); }
    }
    body {
      animation: bgPulse 12s ease-in-out infinite;
    }
    #app {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      user-select: none;
    }
    .letter {
      font-size: 8rem;
      font-weight: bold;
      transition: color 0.5s, transform 0.5s;
    }
    .letter.pulsing {
      animation: pulseMove 1.5s ease-in-out infinite;
    }
    @keyframes pulseMove {
      0%, 100% {
        transform: scale(1) translateY(0);
      }
      50% {
        transform: scale(1.2) translateY(-10px);
      }
    }
    .image {
      width: 60vw;
      height: 40vh;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 5rem;
    }
  </style>
</head>
<body>
  <div id="app">
    <div class="letter" id="letter"></div>
    <div class="image" id="image"></div>
  </div>

  <script>
    const alphabet = '–ê–ë–í–ì–î–ï–ñ–ó–ò–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–≠–Æ–Ø';
    const words = [
      ['–ê–±—Ä–∏–∫–æ—Å', '–ê—Ä–±—É–∑', '–ê–ø–µ–ª—å—Å–∏–Ω'], ['–ë–∞–Ω–∞–Ω', '–ë–∞–∫–ª–∞–∂–∞–Ω', '–ë—Ä—É—Å–Ω–∏–∫–∞'], ['–í–∏—à–Ω—è', '–í–∏–Ω–æ–≥—Ä–∞–¥', '–í–æ–¥—è–Ω–∏–∫–∞'],
      ['–ì—Ä—É—à–∞', '–ì–æ–ª—É–±–∏–∫–∞', '–ì—Ä–∞–Ω–∞—Ç'], ['–î—ã–Ω—è', '–î–∏–º–∞', '–î–æ–º'], ['–ï–∂–µ–≤–∏–∫–∞', '–ï–ª—å', '–ï–ª–µ–Ω–∞'],
      ['–ñ–∏–∑–Ω—å', '–ñ—É—Ä–∞–≤–ª—å', '–ñ—É–∫'], ['–ó–µ–º–ª—è–Ω–∏–∫–∞', '–ó–µ–º–ª—è', '–ó–æ–Ω—Ç'], ['–ò–Ω–∂–∏—Ä', '–ò–Ω–¥—é–∫', '–ò–∫—Ä–∞'],
      ['–ö–∏–≤–∏', '–ö–∞–ø—É—Å—Ç–∞', '–ö—Ä—ã–∂–æ–≤–Ω–∏–∫'], ['–õ–∏–º–æ–Ω', '–õ–∞–π–º', '–õ—É–∫'], ['–ú–∞–Ω–¥–∞—Ä–∏–Ω', '–ú–∞–ª–∏–Ω–∞', '–ú–æ—Ä–∫–æ–≤—å'],
      ['–ù–µ–∫—Ç–∞—Ä–∏–Ω', '–ù–æ—Å–∫–∏', '–ù–æ–≥–∏'], ['–û–≥—É—Ä–µ—Ü', '–û–±–ª–µ–ø–∏—Ö–∞', '–û–ª–∏–≤–∫–∞'], ['–ü–µ—Ä—Å–∏–∫', '–ü–æ–º–∏–¥–æ—Ä', '–ü–∞–ø–∞'],
      ['–†–µ–¥–∏—Å', '–†–µ–¥—å–∫–∞', '–†—è–±–∏–Ω–∞'], ['–°–ª–∏–≤–∞', '–°–º–æ—Ä–æ–¥–∏–Ω–∞', '–°–≤—ë–∫–ª–∞'], ['–¢—ã–∫–≤–∞', '–¢–æ–º–∞—Ç', '–¢—Ä–∞–≤–∫–∞'],
      ['–£–∫—Ä–æ–ø', '–£–ª–∏—Ü–∞', '–£–ª—ã–±–∫–∞'], ['–§–∏–Ω–∏–∫', '–§–µ—è', '–§–∏—Å—Ç–∞—à–∫–∞'], ['–•—É—Ä–º–∞', '–•–≤–æ—Å—Ç–∏–∫', '–•—Ä—é—à–∞'],
      ['–¶–∏–∫–æ—Ä–∏–π', '–¶–∞–ø–ª—è', '–¶–≤–µ—Ç–æ—á–µ–∫'], ['–ß–µ—Ä–µ—à–Ω—è', '–ß–µ—Ä–Ω–∏–∫–∞', '–ß–µ—Ä–µ–ø–∞—Ö–∞'], ['–®–ø–∏–Ω–∞—Ç', '–®–Ω—É—Ä–∫–∏', '–®–∏–ø–æ–≤–Ω–∏–∫'],
      ['–©–∞–≤–µ–ª—å', '–©—É–∫–∞', '–©—ë—á–∫–∞'], ['–≠–∫–ª–µ—Ä', '—ç—Å–∫–∏–º–æ', '—ç—Ç–∞–∂'], ['–Æ–ª–∞', '–Æ–º–æ—Ä–∏—Å—Ç', '–Æ–Ω–≥–∞'], ['–Ø–±–ª–æ–∫–æ', '–Ø–≥–æ–¥–∞', '–Ø–∑—ã–∫']
    ];

    const colors = ['red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet'];

    const letterEl = document.getElementById('letter');
    const imageEl = document.getElementById('image');

    let index = 0;
    let subIndex = 0;
    let tapCount = 0;

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'ru-RU';
      speechSynthesis.speak(utterance);
    }

    function updateDisplay() {
      const letter = alphabet[index];
      const word = words[index][subIndex];
      letterEl.textContent = letter;
      letterEl.style.color = colors[tapCount % colors.length];

      if (tapCount > 4) {
        letterEl.classList.add('pulsing');
      } else {
        letterEl.classList.remove('pulsing');
      }

      const url = `${index + 1}_${subIndex + 1}.png`;
      const img = new Image();
      img.src = url;
      img.onload = () => {
        imageEl.style.backgroundImage = `url(${url})`;
        imageEl.textContent = '';
      };
      img.onerror = () => {
        imageEl.style.backgroundImage = '';
        imageEl.textContent = 'üò¢';
        imageEl.style.color = colors[tapCount % colors.length];
      };
    }

    function nextLetter(dir) {
      index = dir === 'next'
        ? (index + 1) % alphabet.length
        : (index - 1 + alphabet.length) % alphabet.length;
      subIndex = 0;
      tapCount = 0;
      updateDisplay();
    }

    function nextWord() {
      subIndex = (subIndex + 1) % words[index].length;
      tapCount = 0;
      updateDisplay();
    }

    letterEl.addEventListener('click', () => {
      tapCount++;
      letterEl.style.color = colors[tapCount % colors.length];
      if (tapCount === 2) {
        letterEl.style.color = colors[Math.floor(Math.random() * colors.length)];
      }
      speak(words[index][subIndex]);
      updateDisplay();
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight') nextLetter('next');
      if (e.key === 'ArrowLeft') nextLetter('prev');
      if (e.key === 'ArrowDown') nextWord();
    });

    // –°–≤–∞–π–ø—ã –º—ã—à—å—é
    let startX = null;
    document.addEventListener('mousedown', e => startX = e.clientX);
    document.addEventListener('mouseup', e => {
      if (startX === null) return;
      const dx = e.clientX - startX;
      if (dx > 50) nextLetter('prev');
      if (dx < -50) nextLetter('next');
      startX = null;
    });

    updateDisplay();
  </script>
</body>
</html>
